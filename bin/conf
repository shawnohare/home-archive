#! /usr/bin/env bash

_git() {
    git --git-dir="${HOME}/.git/" --work-tree="${HOME}" "$@"
}


sync() {
    # Pull changes into bare repo and checkout
    cd ~/.git || exit 1
    git add .
    git commit -m "Syncing"
    git push
    _git fetch
    _get pull -f
}

edit() {
    # Obviated by the nvim wrapper in ~/bin/vi
    export GIT_DIR="$HOME/.git"
    export GIT_WORK_TREE="$HOME"
    nvim "$@"
}

# Parse command aliases.
case $1 in
    ed|edit)
        edit "${@:2}"
        ;;
    sync)
        sync "${@:2}"
        ;;
    git)
        _git "${@:2}"
        ;;
    # ls)
    #     # _git ls-tree -r --name-status master "${@:2}"
    #     _git ls-files "${@:2}"
    #     ;;
    # add|commit|diff|log|pull|push|restore|stash|status|switch|unstage)
    #     _git "${cmd}" "${@:2}"
    #     ;;
    **)
        _git "${@}"
        ;;
esac
